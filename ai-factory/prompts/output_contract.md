Output Contract:
- Provide a unified diff in a code block labeled 'diff'.
- Provide agent_output.json in a code block labeled 'json'.
- No additional prose outside those blocks.
